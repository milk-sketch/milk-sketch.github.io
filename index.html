<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yi-Chen (Ethan) Wang // GLOBAL TELEMETRY</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Orbitron:wght@400;700&family=Noto+Sans+TC:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        /* --- 1. CORE VARIABLES & RESET --- */
        :root {
            /* F1 / Hacker Mode Colors */
            --primary: #00ff41;       /* Terminal Green */
            --accent: #ff4500;        /* Mars Red / Orange */
            --danger: #ff003c;        /* Red Alert */
            --bg-color: #050505;      /* Deep Dark */
            --card-bg: rgba(10, 15, 10, 0.85);
            --modal-bg: rgba(5, 10, 5, 0.95);
            --grid-line: rgba(0, 255, 65, 0.1);
            --font-mono: 'Share Tech Mono', monospace;
            --font-header: 'Orbitron', sans-serif;
            --font-body: 'Noto Sans TC', sans-serif;
            
            /* Dog Mode Variables */
            --dog-primary: #ffcc00;   /* Tennis Ball Yellow */
            --dog-accent: #ff6b6b;    /* Warm Red */
            --dog-bg: #2d2a26;        /* Warm Dark Grey */
        }

        body.dog-mode {
            --primary: var(--dog-primary);
            --accent: var(--dog-accent);
            --bg-color: var(--dog-bg);
            --grid-line: rgba(255, 204, 0, 0.1);
            --card-bg: rgba(45, 42, 38, 0.9);
            --modal-bg: rgba(50, 45, 40, 0.95);
            cursor: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24' fill='%23ffcc00'><path d='M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M17.5,2A3.5,3.5 0 0,1 21,5.5A3.5,3.5 0 0,1 17.5,9A3.5,3.5 0 0,1 14,5.5A3.5,3.5 0 0,1 17.5,2M6.5,2A3.5,3.5 0 0,1 10,5.5A3.5,3.5 0 0,1 6.5,9A3.5,3.5 0 0,1 3,5.5A3.5,3.5 0 0,1 6.5,2M12,13C12.5,13 15.8,13 17.5,15.5C19.2,18 19.5,20.5 17.5,21.5C15.5,22.5 12,22 12,22C12,22 8.5,22.5 6.5,21.5C4.5,20.5 4.8,18 6.5,15.5C8.2,13 11.5,13 12,13Z'/></svg>") 16 16, auto;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        /* Custom Scrollbar Logic */
        ::-webkit-scrollbar {
            width: 0px;
            background: transparent;
        }

        body {
            background-color: var(--bg-color);
            color: var(--primary);
            font-family: var(--font-mono);
            overflow-x: hidden;
            transition: background-color 1s ease, color 1s ease;
            will-change: transform, filter, text-shadow;
        }

        /* --- LOADING SCREEN --- */
        #loader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: opacity 0.5s ease-out;
        }
        .loader-text {
            font-family: var(--font-header); font-size: 1.5rem; letter-spacing: 5px;
            color: var(--primary); animation: blink 1s infinite;
        }
        .loader-bar {
            width: 200px; height: 2px; background: #333; margin-top: 20px; position: relative; overflow: hidden;
        }
        .loader-progress {
            position: absolute; left: 0; top: 0; height: 100%; width: 0%; background: var(--primary);
            animation: load 1.5s forwards;
        }
        @keyframes load { 0% { width: 0%; } 100% { width: 100%; } }

        /* --- NAVIGATION --- */
        #nav-bar {
            position: fixed; top: 0; left: 0; width: 100%; z-index: 100;
            padding: 20px 40px; display: flex; justify-content: space-between; align-items: center;
            background: linear-gradient(to bottom, rgba(0,0,0,0.9), transparent);
            transform: translateY(-100%); /* Hidden initially */
            transition: transform 0.5s ease-out;
        }
        #nav-bar.visible { transform: translateY(0); }
        
        .nav-logo { font-family: var(--font-header); font-weight: bold; font-size: 1.2rem; color: var(--primary); }
        .nav-links { display: flex; gap: 30px; }
        .nav-link { 
            color: #ccc; text-decoration: none; font-size: 0.9rem; text-transform: uppercase; 
            position: relative; transition: color 0.3s;
        }
        .nav-link:hover { color: var(--accent); }
        .nav-link::after {
            content: ''; position: absolute; bottom: -5px; left: 0; width: 0%; height: 1px; 
            background: var(--accent); transition: width 0.3s;
        }
        .nav-link:hover::after { width: 100%; }

        /* --- F1 SCROLLBAR --- */
        #f1-track {
            position: fixed; top: 0; right: 5px; width: 10px; height: 100vh;
            border-left: 1px dashed var(--grid-line); border-right: 1px dashed var(--grid-line);
            z-index: 1000; pointer-events: none; opacity: 0; transition: opacity 1s;
        }
        #f1-car {
            position: absolute; right: -6px; top: 0; font-size: 20px; color: var(--accent);
            transform: rotate(180deg); transition: top 0.1s linear; text-shadow: 0 0 5px var(--accent);
        }

        /* --- BACKGROUND TRAFFIC FX --- */
        #traffic-layer {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100vh;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }

        .bg-car {
            position: absolute;
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, transparent, var(--accent));
            border-radius: 2px;
            box-shadow: 0 0 10px var(--accent);
            opacity: 0;
        }
        
        .bg-car::after {
            content: 'üèéÔ∏è';
            position: absolute;
            right: 0;
            top: -10px;
            font-size: 20px;
            transform: scaleX(-1);
            filter: drop-shadow(0 0 5px var(--accent));
        }

        /* --- VISUAL FX --- */
        .scanlines {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 2px, 3px 100%;
            pointer-events: none;
            z-index: 50;
        }
        
        .shake-active { animation: shake 0.5s infinite; }
        .glitch-active { animation: glitch-skew 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) both infinite; filter: drop-shadow(2px 2px var(--danger)) drop-shadow(-2px -2px var(--accent)); }

        @keyframes shake { 0% { transform: translate(1px, 1px) rotate(0deg); } 50% { transform: translate(-1px, 2px) rotate(-1deg); } 100% { transform: translate(1px, -2px) rotate(-1deg); } }
        @keyframes glitch-skew { 0% { transform: skew(0deg); } 20% { transform: skew(-2deg); } 40% { transform: skew(2deg); } 60% { transform: skew(-1deg); } 80% { transform: skew(1deg); } 100% { transform: skew(0deg); } }
        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }
        @keyframes popUp { from { transform: scale(0) translateY(20px); } to { transform: scale(1) translateY(0); } }
        @keyframes bounce { from { transform: translateY(0); } to { transform: translateY(-10px); } }

        /* --- LAYOUT --- */
        #canvas-container { position: fixed; top: 0; left: 0; width: 100%; height: 100vh; z-index: 0; opacity: 1; }
        
        #ui-layer { 
            position: relative; 
            z-index: 10; 
            width: 100%; 
            min-height: 100vh; 
            padding: 20px; 
            padding-top: 80px; /* Space for Nav */
            pointer-events: none; 
            opacity: 0; 
            transition: opacity 1.5s ease-out;
        }
        
        #ui-layer.ui-loaded { opacity: 1; pointer-events: auto; }

        .interactive-area { pointer-events: auto; }

        .hud-header { display: none; } /* Replaced by Sticky Nav */
        
        .section-title {
            font-family: var(--font-header); font-size: 2rem; border-bottom: 2px dashed var(--primary);
            margin: 80px 0 40px 0; padding-bottom: 10px; display: inline-block;
        }

        .hero-section { min-height: 85vh; display: flex; flex-direction: column; justify-content: center; align-items: flex-start; max-width: 900px; margin: 0 auto; }
        h1 { font-family: var(--font-header); font-size: clamp(2.5rem, 5vw, 4.5rem); line-height: 1.1; margin-bottom: 30px; text-shadow: 0 0 10px var(--grid-line); }

        .bio-box {
            background: var(--card-bg); border-left: 3px solid var(--accent); padding: 30px;
            backdrop-filter: blur(4px); margin-bottom: 30px; max-width: 750px;
            transition: transform 0.3s;
            position: relative;
            overflow: hidden;
        }
        .bio-box::before { content: "BIO_LOG //"; position: absolute; top: 10px; right: 10px; font-size: 0.7rem; opacity: 0.5; }
        .bio-box:hover { transform: translateX(10px); box-shadow: 0 0 20px rgba(0, 255, 65, 0.1); }
        
        .bio-paragraph { margin-bottom: 20px; }
        .bio-paragraph strong { color: var(--primary); }
        .cn-sub { display: block; font-family: var(--font-body); font-size: 0.4em; font-weight: 300; opacity: 0.8; letter-spacing: 2px; margin-top: 5px; }
        .cn-text { font-family: var(--font-body); font-size: 0.95rem; opacity: 0.8; display: block; margin-top: 5px; line-height: 1.6; }

        .control-deck { display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap; }
        .btn {
            background: transparent; border: 1px solid var(--primary); color: var(--primary);
            padding: 12px 24px; font-family: var(--font-header); font-size: 1rem; cursor: pointer;
            text-transform: uppercase; position: relative; overflow: hidden; transition: all 0.3s;
            display: flex; align-items: center; gap: 10px;
        }
        .btn:hover { box-shadow: 0 0 15px var(--primary); transform: translateY(-2px); background: rgba(0, 255, 65, 0.1); }
        .btn-accent { border-color: var(--accent); color: var(--accent); }
        .btn-accent:hover { box-shadow: 0 0 15px var(--accent); background: rgba(255, 69, 0, 0.1); }

        .telemetry-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; max-width: 1100px; margin: 0 auto; }
        .rpm-card {
            background: var(--card-bg); border: 1px solid var(--grid-line); padding: 25px;
            position: relative; transition: all 0.3s; cursor: crosshair;
        }
        .rpm-card:hover { border-color: var(--primary); box-shadow: 0 0 20px rgba(0, 255, 65, 0.2); transform: scale(1.02); }
        .rpm-gauge { width: 100%; height: 12px; background: #222; margin-top: 15px; transform: skewX(-20deg); border: 1px solid #444; }
        .rpm-fill { height: 100%; background: linear-gradient(90deg, var(--primary) 60%, var(--accent) 90%, var(--danger) 100%); width: 0%; transition: width 1.5s; }
        .rpm-value { position: absolute; right: 15px; top: 25px; font-size: 1.8rem; font-weight: bold; color: var(--accent); font-family: var(--font-header); }

        .track-container { position: relative; max-width: 900px; margin: 0 auto; padding-left: 50px; }
        .track-line { position: absolute; left: 20px; top: 0; bottom: 0; width: 4px; background: var(--primary); box-shadow: 0 0 10px var(--primary); }
        
        .checkpoint {
            position: relative; margin-bottom: 60px; background: var(--card-bg); border: 1px solid var(--grid-line);
            padding: 25px; margin-left: 20px; transition: all 0.3s; cursor: default;
        }
        .checkpoint:hover { transform: translateX(10px); border-color: var(--accent); }
        .checkpoint::before {
            content: ''; position: absolute; left: -26px; top: 30px; width: 12px; height: 12px;
            background: var(--bg-color); border: 2px solid var(--accent); border-radius: 50%; box-shadow: 0 0 10px var(--accent); z-index: 2;
        }
        .event-tag { background: var(--primary); color: #000; padding: 2px 8px; font-size: 0.75rem; font-weight: bold; display: inline-block; font-family: var(--font-header); margin-bottom: 10px; }

        .summit-card {
            display: flex; flex-wrap: wrap; gap: 20px; align-items: flex-start;
        }
        .summit-visual {
            flex: 1 1 300px; min-height: 200px; background: #111;
            border: 1px solid var(--grid-line); display: flex; align-items: center; justify-content: center;
            overflow: hidden; position: relative;
        }
        .summit-visual img { width: 100%; height: auto; display: block; filter: grayscale(100%) contrast(1.2); transition: 0.5s; }
        .summit-visual:hover img { filter: grayscale(0%); }
        
        .summit-content { flex: 2 1 300px; }
        .summit-title { font-size: 1.5rem; color: var(--primary); margin-bottom: 10px; font-family: var(--font-header); }
        .summit-abstract { color: #ccc; font-size: 1rem; margin-bottom: 20px; line-height: 1.6; }
        
        .stats-row { display: flex; gap: 20px; margin-bottom: 20px; border-top: 1px dashed #333; padding-top: 10px; }
        .stat-item { display: flex; align-items: center; gap: 8px; font-size: 0.9rem; }
        .stat-item i { color: var(--accent); }
        
        .action-row { display: flex; gap: 10px; }
        .btn-small { padding: 8px 16px; font-size: 0.8rem; }

        /* --- MODAL SYSTEM --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); backdrop-filter: blur(8px);
            z-index: 2000; display: flex; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none; transition: opacity 0.3s;
        }
        .modal-overlay.active { opacity: 1; pointer-events: auto; }
        
        .modal-window {
            width: 800px; max-width: 90%; max-height: 90vh; overflow-y: auto;
            background: var(--modal-bg); border: 2px solid var(--primary);
            box-shadow: 0 0 30px rgba(0, 255, 65, 0.2); padding: 0;
            transform: scale(0.9); transition: transform 0.3s; position: relative;
        }
        .modal-overlay.active .modal-window { transform: scale(1); }
        
        .modal-header {
            background: var(--primary); color: #000; padding: 10px 20px;
            font-family: var(--font-header); font-weight: bold;
            display: flex; justify-content: space-between; align-items: center;
        }
        .modal-close-btn { background: none; border: none; font-size: 1.2rem; cursor: pointer; color: #000; font-weight: bold; }
        .modal-content { padding: 30px; font-family: var(--font-mono); }
        
        /* Modal Internal Styling */
        .terminal-log { background: #000; padding: 15px; border: 1px solid #333; color: #ccc; font-size: 0.9rem; margin-top: 10px; height: 200px; overflow-y: scroll; font-family: monospace; }
        .terminal-line { margin-bottom: 5px; border-bottom: 1px solid #111; padding-bottom: 2px; }
        .success { color: var(--primary); }
        .warning { color: var(--accent); }
        
        .video-placeholder {
            background: #000; width: 100%; height: 300px; display: flex; align-items: center; justify-content: center;
            border: 1px solid #333; margin-bottom: 20px;
        }
        .play-icon { font-size: 50px; color: var(--primary); cursor: pointer; transition: 0.3s; }
        .play-icon:hover { color: var(--accent); transform: scale(1.1); }

        /* --- IG MODAL STYLES --- */
        .ig-header { display: flex; gap: 20px; align-items: center; margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid #333; }
        .ig-pfp { width: 80px; height: 80px; border-radius: 50%; overflow: hidden; border: 2px solid var(--accent); }
        .ig-pfp img { width: 100%; height: 100%; object-fit: cover; }
        .ig-info { flex: 1; }
        .ig-stats { display: flex; gap: 20px; margin: 10px 0; font-size: 0.9rem; }
        .ig-stats strong { color: #fff; margin-right: 5px; }
        .ig-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .ig-post { aspect-ratio: 1; background: #222; position: relative; overflow: hidden; cursor: pointer; }
        .ig-post img { width: 100%; height: 100%; object-fit: cover; transition: 0.3s; filter: grayscale(50%); }
        .ig-post:hover img { filter: grayscale(0%); transform: scale(1.1); }

        /* --- RESUME MODAL STYLES (NEW) --- */
        .resume-header-row { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--primary); padding-bottom: 15px; margin-bottom: 20px; }
        .resume-status { font-size: 0.8rem; background: var(--primary); color: #000; padding: 2px 8px; font-weight: bold; }
        
        .resume-section { margin-bottom: 30px; }
        .resume-section h4 { color: var(--accent); border-left: 3px solid var(--accent); padding-left: 10px; margin-bottom: 15px; font-family: var(--font-header); font-size: 1.2rem; }
        
        .resume-item { display: flex; gap: 15px; margin-bottom: 15px; }
        .resume-date { width: 120px; font-size: 0.85rem; color: #888; text-align: right; flex-shrink: 0; padding-top: 3px; }
        .resume-detail h5 { color: #fff; font-size: 1rem; margin-bottom: 3px; }
        .resume-detail p { color: #ccc; font-size: 0.9rem; line-height: 1.4; }
        
        .skill-matrix { display: flex; flex-wrap: wrap; gap: 10px; }
        .skill-tag { background: #111; border: 1px solid var(--grid-line); padding: 5px 10px; font-size: 0.8rem; color: var(--primary); }

        /* --- DRAGGABLE BUTTON STYLES --- */
        .debug-toggle {
            position: fixed; bottom: 20px; right: 20px; 
            background: rgba(0,0,0,0.8); border: 1px solid var(--primary);
            color: var(--primary); padding: 10px 20px; 
            cursor: move; /* Changed cursor to indicate dragging */
            font-family: var(--font-mono); text-transform: uppercase;
            z-index: 100; transition: 0.3s; backdrop-filter: blur(5px);
            user-select: none; /* Prevent text selection while dragging */
            touch-action: none; /* Better touch support */
        }
        .debug-toggle:hover { background: var(--primary); color: #000; }
        .debug-toggle:active { transform: scale(0.95); } /* Press effect */

        .dog-popup { position: fixed; bottom: 80px; right: 20px; width: 250px; display: none; z-index: 99; animation: popUp 0.5s; }
        .dog-bubble { background: #fff; color: #000; padding: 15px; border-radius: 15px; border-bottom-right-radius: 0; margin-bottom: 10px; font-size: 0.95rem; font-family: var(--font-body); box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        .pixel-dog { font-size: 60px; text-align: right; filter: drop-shadow(0 5px 5px rgba(0,0,0,0.5)); animation: bounce 0.6s infinite alternate; }

        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }
        @keyframes popUp { from { transform: scale(0) translateY(20px); } to { transform: scale(1) translateY(0); } }
        @keyframes bounce { from { transform: translateY(0); } to { transform: translateY(-10px); } }

        footer { text-align: center; padding: 50px 0; border-top: 1px solid var(--grid-line); margin-top: 50px; font-family: var(--font-body); color: #666; }

        @media (max-width: 768px) {
            .hero-section { padding-top: 120px; } /* Extra padding for nav */
            h1 { font-size: 2.5rem; }
            .track-container { padding-left: 20px; }
            .control-deck { justify-content: center; }
            #f1-track { display: none; }
            .modal-window { width: 95%; }
            .nav-links { display: none; } /* Hide links on mobile for now, just show logo */
            .resume-item { flex-direction: column; gap: 5px; }
            .resume-date { width: 100%; text-align: left; margin-bottom: 5px; color: var(--accent); }
        }
    </style>
</head>
<body>

    <!-- LOADING SCREEN -->
    <div id="loader">
        <div class="loader-text">INITIALIZING SYSTEM...</div>
        <div class="loader-bar"><div class="loader-progress"></div></div>
    </div>

    <!-- VISUAL FX LAYERS -->
    <div class="scanlines"></div>
    <div id="traffic-layer"></div>
    <div id="canvas-container"></div>
    
    <!-- F1 SCROLLBAR -->
    <div id="f1-track">
        <div id="f1-car">üèéÔ∏è</div>
    </div>

    <!-- NAVIGATION BAR -->
    <nav id="nav-bar">
        <div class="nav-logo">GLOBAL_TELEMETRY // ETHAN</div>
        <div class="nav-links">
            <a href="#hero" class="nav-link">Home</a>
            <a href="#skills" class="nav-link">Telemetry</a>
            <a href="#journey" class="nav-link">Journey</a>
            <a href="#pitstop" class="nav-link">Pit Stop</a>
        </div>
    </nav>

    <!-- UI LAYER -->
    <div id="ui-layer">
        
        <!-- Hero Section -->
        <section id="hero" class="hero-section interactive-area">
            <h1>
                BRIDGING CODE,<br>
                CULTURE & <span class="highlight">WORLD</span>.
                <span class="cn-sub">Global Tech Liaison & Software Engineer</span>
            </h1>
            
            <div class="bio-box">
                <div class="bio-paragraph">
                    <p class="en">> <strong>Driven by Logic, Fueled by Curiosity.</strong></p>
                    <p class="cn-text">ÈÇèËºØÈ©ÖÂãïÔºåÂ•ΩÂ•áÂºïÁáÉ„ÄÇ</p>
                </div>
                
                <div class="bio-paragraph">
                    <p class="en">> To me, software development shares a soul with Formula 1. It‚Äôs not just about speed; it‚Äôs about the <strong>relentless pursuit of optimization</strong>.</p>
                    <p class="cn-text">Â∞çÊàëËÄåË®ÄÔºåËªüÈ´îÈñãÁôºËàá F1 Ë≥ΩËªäÊúâËëóÁõ∏ÂêåÁöÑÈùàÈ≠Ç„ÄÇÈÄô‰∏çÂÉÖÈóú‰πéÈÄüÂ∫¶ÔºåÊõ¥Âú®ÊñºÂ∞çÂÑ™ÂåñÁöÑÊ•µËá¥ËøΩÊ±Ç„ÄÇ</p>
                </div>

                <div class="bio-paragraph">
                    <p class="en">> My journey took me from the US to international summits. These experiences taught me that <strong>code is a language, but communication is the bridge.</strong></p>
                    <p class="cn-text">ÂæûÁæéÂúãÁïôÂ≠∏ÁöÑË∑®ÊñáÂåñÈÅ©ÊáâÔºåÂà∞ÂúãÈöõÈ´òÂ≥∞ÊúÉÁöÑËàûÂè∞„ÄÇÈÄô‰∫õÁ∂ìÊ≠∑ÊïôÊúÉÊàëÔºöÁ®ãÂºèÁ¢ºÊòØË™ûË®ÄÔºåËÄåÊ∫ùÈÄöÊòØÊ©ãÊ®ë„ÄÇ</p>
                </div>
            </div>

            <div class="control-deck">
                <button class="btn btn-accent" onclick="activateTurbo()">
                    ‚ö° TURBO BOOST <span style="font-size:0.6em">Âä†ÈÄüÊ®°Âºè</span>
                </button>
                <button class="btn" onclick="openModal('modal-instagram')">
                    <i class="fab fa-instagram"></i> INSTAGRAM <span style="font-size:0.6em">Á§æ‰∫§Â™íÈ´î</span>
                </button>
                <!-- Updated Resume Button -->
                <button class="btn" onclick="openModal('modal-resume')">
                    <i class="fas fa-file-alt"></i> RESUME <span style="font-size:0.6em">Á∞°Ê≠∑</span>
                </button>
            </div>
        </section>

        <!-- Skills Section -->
        <section id="skills" class="interactive-area">
            <h2 class="section-title">ENGINE TELEMETRY <span style="font-size:0.5em; vertical-align:middle; margin-left:10px;">ÊäÄËÉΩÂèÉÊï∏</span></h2>
            <div class="telemetry-grid">
                <div class="rpm-card" onclick="openModal('modal-resume')">
                    <div class="rpm-value">95%</div>
                    <h3>REACT / NEXT.JS</h3>
                    <span class="cn-text">Frontend Architecture</span>
                    <div class="rpm-gauge"><div class="rpm-fill" style="width: 95%"></div></div>
                </div>
                <div class="rpm-card">
                    <div class="rpm-value">88%</div>
                    <h3>WEBGL / THREE.JS</h3>
                    <span class="cn-text">3D Visualization</span>
                    <div class="rpm-gauge"><div class="rpm-fill" style="width: 88%"></div></div>
                </div>
                <div class="rpm-card">
                    <div class="rpm-value">92%</div>
                    <h3>UI / UX DESIGN</h3>
                    <span class="cn-text">Interface Design</span>
                    <div class="rpm-gauge"><div class="rpm-fill" style="width: 92%"></div></div>
                </div>
                 <div class="rpm-card">
                    <div class="rpm-value">100%</div>
                    <h3>COMMUNICATION</h3>
                    <span class="cn-text">Cross-Cultural Bridge</span>
                    <div class="rpm-gauge"><div class="rpm-fill" style="width: 100%"></div></div>
                </div>
            </div>
        </section>

        <!-- Journey Section -->
        <section id="journey" class="interactive-area" style="padding-bottom: 50px;">
            <h2 class="section-title">TRACK DATA (JOURNEY) <span style="font-size:0.5em; vertical-align:middle; margin-left:10px;">ÁîüÊ∂ØËªåË∑°</span></h2>
            <div class="track-container">
                <div class="track-line"></div>
                
                <div class="checkpoint">
                    <span class="event-tag">CURRENT LAP // Áï∂ÂâçÂúàÈÄü</span>
                    <h3>Full Stack Developer</h3>
                    <p class="cn-text">Optimizing performance and building scalable architecture for global clients.</p>
                </div>

                <div class="checkpoint" style="border-color: var(--accent);">
                    <span class="event-tag" style="background: var(--accent);">üèÜ FLAG: CHECKERED // ÊèÆÊóóÊôÇÂàª</span>
                    
                    <div class="summit-card">
                        <div class="summit-visual">
                            <img src="https://images.unsplash.com/photo-1544531586-fde5298cdd40?q=80&w=1000&auto=format&fit=crop" alt="Speaking at Summit">
                            <div style="position: absolute; bottom: 10px; left: 10px; background: rgba(0,0,0,0.7); padding: 5px; font-size: 0.8rem;">
                                üé§ KEYNOTE SPEAKER
                            </div>
                        </div>

                        <div class="summit-content">
                            <h3 class="summit-title">Global Youth Summit 2024</h3>
                            <p style="color: #fff; font-weight: bold; margin-bottom: 5px;">New York, USA</p>
                            <p class="summit-abstract">
                                Presented insights on the intersection of technology policy and cross-cultural communication. Led a panel discussion on how digital tools can bridge gaps in international relations.
                                <span class="cn-text">Êìî‰ªªÂ∞àÈ°åË¨õËÄÖÔºåÊé¢Ë®éÊäÄË°ìÊîøÁ≠ñËàáË∑®ÊñáÂåñÊ∫ùÈÄöÁöÑ‰∫§ÈõÜ„ÄÇ‰∏ªÊåÅÈóúÊñºÊï∏‰ΩçÂ∑•ÂÖ∑Â¶Ç‰ΩïÁ∏ÆÂ∞èÂúãÈöõÈóú‰øÇÂ∑ÆË∑ùÁöÑÂ∞èÁµÑË®éË´ñ„ÄÇ</span>
                            </p>

                            <div class="stats-row">
                                <div class="stat-item"><i class="fas fa-globe-americas"></i> 30+ Countries</div>
                                <div class="stat-item"><i class="fas fa-users"></i> 500+ Audience</div>
                            </div>

                            <div class="action-row">
                                <button class="btn btn-small btn-accent" onclick="openModal('modal-download')">
                                    <i class="fas fa-download"></i> SLIDES
                                </button>
                                <button class="btn btn-small" onclick="openModal('modal-video')">
                                    <i class="fas fa-play"></i> RECORDING
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="checkpoint">
                    <span class="event-tag">PIT STOP: USA // ÁæéÂúãÁ´ô</span>
                    <h3>M.S. Computer Science</h3>
                    <p>Specialized in Human-Computer Interaction.</p>
                    <p class="cn-text">Â∞àÊîª‰∫∫Ê©ü‰∫íÂãï (HCI)ÔºåÂú®Ë∑®ÊñáÂåñÁí∞Â¢É‰∏≠Á£®Á∑¥Áç®Á´ãËß£Ê±∫ÂïèÈ°åÁöÑËÉΩÂäõ„ÄÇ</p>
                </div>
            </div>
        </section>

        <!-- THE PIT STOP SECTION -->
        <section id="pitstop" class="interactive-area" style="padding-bottom: 80px;">
            <h2 class="section-title">THE PIT STOP <span style="font-size:0.5em; vertical-align:middle; margin-left:10px;">OFFLINE MODE</span></h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; max-width: 1000px; margin: 0 auto;">
                <!-- Dog Card -->
                <div class="rpm-card" style="text-align: center;">
                    <div style="width: 100px; height: 100px; margin: 0 auto 20px; border-radius: 50%; overflow: hidden; border: 3px solid var(--accent);">
                        <img src="https://images.unsplash.com/photo-1552053831-71594a27632d?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" style="width: 100%; height: 100%; object-fit: cover;" alt="Buddy">
                    </div>
                    <h3 style="color: var(--accent);">BUDDY</h3>
                    <span class="cn-text" style="font-weight: bold; letter-spacing: 2px;">CHIEF HAPPINESS OFFICER</span>
                    <p style="margin-top: 15px; font-size: 0.9rem; color: #ccc; line-height: 1.6;">
                        "Meeting my daily quota of walks and belly rubs. The best debugger I know‚Äîalways listening, never judging."
                    </p>
                </div>
                
                <!-- F1 Card -->
                <div class="rpm-card" style="text-align: center;">
                     <div style="width: 100px; height: 100px; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; background: #111; border-radius: 50%; border: 3px solid var(--primary);">
                        <i class="fas fa-flag-checkered" style="font-size: 40px; color: var(--primary);"></i>
                    </div>
                    <h3 style="color: var(--primary);">F1 STRATEGIST</h3>
                    <span class="cn-text" style="font-weight: bold; letter-spacing: 2px;">ARMCHAIR DIVISION</span>
                    <p style="margin-top: 15px; font-size: 0.9rem; color: #ccc; line-height: 1.6;">
                        Analyzing tire degradation and undercut strategies. Currently supporting the fastest car on the grid.
                        <br><span style="color: var(--danger); font-size: 0.8em;">LIGHTS OUT AND AWAY WE GO!</span>
                    </p>
                </div>
            </div>
        </section>

        <!-- Hidden Header for clock reference -->
        <header class="hud-header">
            <div>Global Telemetry // <span class="highlight">ONLINE</span></div>
            <div class="system-status">
                <span id="clock">00:00:00 UTC</span>
                <div>SYS: <span class="highlight">NOMINAL</span></div>
                <div>NET: <span class="status-light"></span></div>
            </div>
        </header>

        <footer>
            <p>¬© 2024 Yi-Chen (Ethan) Wang. ALL SYSTEMS NOMINAL.</p>
            <p style="font-size: 0.8rem; margin-top: 10px; opacity: 0.6;"><a href="mailto:hello@example.com" style="color: inherit; text-decoration: none;">hello@example.com</a></p>
        </footer>
    </div>

    <!-- MODALS -->
    <!-- NEW: RESUME MODAL (Rich Content) -->
    <div id="modal-resume" class="modal-overlay">
        <div class="modal-window">
            <div class="modal-header">
                <span style="letter-spacing: 2px;">// PERSONNEL_FILE_RETRIEVAL</span>
                <button class="modal-close-btn" onclick="closeModal('modal-resume')">[X]</button>
            </div>
            <div class="modal-content">
                <div style="display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #333; padding-bottom: 20px; margin-bottom: 20px;">
                    <div>
                        <h2 style="font-family: var(--font-header); font-size: 1.8rem; color: var(--primary); margin: 0;">WANG, YI-CHEN</h2>
                        <span style="font-size: 0.9rem; color: #888;">CODENAME: ETHAN // CLEARANCE: LEVEL 5</span>
                    </div>
                    <div style="text-align: right;">
                        <span class="resume-status">STATUS: ACTIVE</span>
                        <div style="font-size: 0.8rem; color: var(--accent); margin-top: 5px;">ENCRYPTED CONNECTION</div>
                    </div>
                </div>

                <!-- Section: Experience -->
                <div class="resume-section">
                    <h4>// MISSION HISTORY (EXPERIENCE)</h4>
                    
                    <div class="resume-item">
                        <div class="resume-date">2023 - PRESENT</div>
                        <div class="resume-detail">
                            <h5>Full Stack Developer & Consultant</h5>
                            <p>Architecting scalable web solutions for global clients using Next.js and Cloud Infrastructure. Bridging technical implementation with business strategy.</p>
                        </div>
                    </div>

                    <div class="resume-item">
                        <div class="resume-date">AUG 2024</div>
                        <div class="resume-detail">
                            <h5>Keynote Speaker @ Global Youth Summit</h5>
                            <p>Delivered keynote on "Tech Policy & Cross-Cultural Bridges" to 500+ international delegates. Moderated high-level panels on digital transformation.</p>
                        </div>
                    </div>
                </div>

                <!-- Section: Education -->
                <div class="resume-section">
                    <h4>// ACADEMIC DATA (EDUCATION)</h4>
                    <div class="resume-item">
                        <div class="resume-date">2021 - 2023</div>
                        <div class="resume-detail">
                            <h5>M.S. Computer Science</h5>
                            <p>Focus: Human-Computer Interaction (HCI) & Data Visualization.<br>University of Example, USA.</p>
                        </div>
                    </div>
                </div>

                <!-- Section: Skills -->
                <div class="resume-section">
                    <h4>// TACTICAL LOADOUT (SKILLS)</h4>
                    <div class="skill-matrix">
                        <span class="skill-tag">JavaScript / TypeScript</span>
                        <span class="skill-tag">React / Next.js</span>
                        <span class="skill-tag">Three.js / WebGL</span>
                        <span class="skill-tag">Node.js / Python</span>
                        <span class="skill-tag">AWS / Docker</span>
                        <span class="skill-tag">UI / UX Design</span>
                        <span class="skill-tag">Public Speaking</span>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 40px; border-top: 1px dashed #444; padding-top: 20px;">
                    <button class="btn btn-small" style="display: inline-block;">
                        <i class="fas fa-download"></i> DOWNLOAD FULL PDF
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Instagram Modal -->
    <div id="modal-instagram" class="modal-overlay">
        <div class="modal-window">
            <div class="modal-header">
                <span>// SOCIAL_LINK: INSTAGRAM</span>
                <button class="modal-close-btn" onclick="closeModal('modal-instagram')">[X]</button>
            </div>
            <div class="modal-content">
                <div class="ig-header">
                    <div class="ig-pfp">
                        <img src="https://images.unsplash.com/photo-1523240795612-9a054b0db644?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Profile">
                    </div>
                    <div class="ig-info">
                        <h3 style="font-size: 1.2rem; color: var(--primary);">ethan.dev <i class="fas fa-check-circle" style="color: var(--accent); font-size: 0.8rem;"></i></h3>
                        <div class="ig-stats">
                            <span><strong>42</strong> Posts</span>
                            <span><strong>1.2k</strong> Followers</span>
                            <span><strong>300</strong> Following</span>
                        </div>
                        <p style="font-size: 0.9rem; color: #ccc;">
                            Bridging Code & Culture üáπüáºüá∫üá∏ | F1 Fan üèéÔ∏è | Dog Lover üêï<br>
                            Coding with precision, living with passion.
                        </p>
                    </div>
                </div>
                
                <div class="ig-grid">
                    <div class="ig-post"><img src="https://images.unsplash.com/photo-1517694712202-14dd9538aa97?w=400&q=80" alt="Code"></div>
                    <div class="ig-post"><img src="https://images.unsplash.com/photo-1544531696-605704153020?w=400&q=80" alt="Summit"></div>
                    <div class="ig-post"><img src="https://images.unsplash.com/photo-1552053831-71594a27632d?w=400&q=80" alt="Dog"></div>
                    <div class="ig-post"><img src="https://images.unsplash.com/photo-1533107862482-0e6974b06ec4?w=400&q=80" alt="F1"></div>
                    <div class="ig-post"><img src="https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=400&q=80" alt="Setup"></div>
                    <div class="ig-post"><img src="https://images.unsplash.com/photo-1496181133206-80ce9b88a853?w=400&q=80" alt="Laptop"></div>
                </div>
                
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn btn-small" style="display: inline-block;">FOLLOW</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Other Modals (Video, Download) -->
    <div id="modal-video" class="modal-overlay"><div class="modal-window"><div class="modal-header"><span>// MISSION_REPLAY_LOG</span><button class="modal-close-btn" onclick="closeModal('modal-video')">[X]</button></div><div class="modal-content"><h3>KEYNOTE SPEECH: BRIDGE BETWEEN WORLDS</h3><p>Recorded Live at San Francisco, 2024.</p><div class="video-placeholder"><i class="fas fa-play-circle play-icon"></i></div></div></div></div>
    <div id="modal-download" class="modal-overlay"><div class="modal-window"><div class="modal-header"><span>// DATA_ARCHIVE_RETRIEVAL</span><button class="modal-close-btn" onclick="closeModal('modal-download')">[X]</button></div><div class="modal-content"><h3>DOWNLOADING SECURE ASSETS...</h3><p>Accessing encrypted slide deck.</p><div style="background: #111; padding: 20px; border: 1px dashed var(--accent); text-align: center; margin: 20px 0;"><i class="fas fa-file-pdf" style="font-size: 40px; color: var(--accent); margin-bottom: 10px;"></i><br><span>Summit_2024_Presentation.pdf</span><br><br><button class="btn btn-small" style="margin: 0 auto;">CONFIRM</button></div></div></div></div>

    <!-- Draggable Debug Button -->
    <button class="debug-toggle interactive-area" onclick="toggleDebugMode()" title="Drag to move / Click to toggle">
        [ ‚ö† DEBUG MODE / ÂÅµÈåØÊ®°Âºè ]
    </button>

    <div class="dog-popup" id="dog-popup">
        <div class="dog-bubble">
            <strong>Woof!</strong> I'm the real boss here.<br>
            <span class="cn-text">Ê±™ÔºÅÂÖ∂ÂØ¶ÊàëÊâçÊòØÁúüÊ≠£ÁöÑËÄÅÈóÜ„ÄÇ</span><br>
            <a href="mailto:your@email.com" style="color:blue;">Email my human</a>
        </div>
        <div class="pixel-dog">üêï</div>
    </div>

    <script>
        // --- LOADER LOGIC ---
        window.addEventListener('load', () => {
            // Intro Sequence handles the rest
        });

        function openModal(modalId) { document.getElementById(modalId).classList.add('active'); }
        function closeModal(modalId) { document.getElementById(modalId).classList.remove('active'); }
        document.querySelectorAll('.modal-overlay').forEach(overlay => {
            overlay.addEventListener('click', (e) => { if (e.target === overlay) overlay.classList.remove('active'); });
        });

        // --- DRAGGABLE BUTTON LOGIC (TOUCH & MOUSE) ---
        const debugBtn = document.querySelector('.debug-toggle');
        let isDraggingBtn = false;
        let startX, startY, initialLeft, initialTop;
        let hasMoved = false;

        debugBtn.addEventListener('mousedown', dragStart);
        document.addEventListener('mousemove', drag);
        document.addEventListener('mouseup', dragEnd);

        debugBtn.addEventListener('touchstart', dragStart, {passive: false});
        document.addEventListener('touchmove', drag, {passive: false});
        document.addEventListener('touchend', dragEnd);

        function dragStart(e) {
            isDraggingBtn = true;
            hasMoved = false;
            const rect = debugBtn.getBoundingClientRect();
            
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const clientY = e.touches ? e.touches[0].clientY : e.clientY;

            startX = clientX;
            startY = clientY;
            initialLeft = rect.left;
            initialTop = rect.top;
            
            debugBtn.style.right = 'auto';
            debugBtn.style.bottom = 'auto';
            debugBtn.style.left = `${initialLeft}px`;
            debugBtn.style.top = `${initialTop}px`;

            debugBtn.style.cursor = 'grabbing';
            debugBtn.style.transform = 'scale(0.95)';
        }

        function drag(e) {
            if (!isDraggingBtn) return;
            if (e.cancelable) e.preventDefault(); 
            
            hasMoved = true;
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const clientY = e.touches ? e.touches[0].clientY : e.clientY;

            const dx = clientX - startX;
            const dy = clientY - startY;

            debugBtn.style.left = `${initialLeft + dx}px`;
            debugBtn.style.top = `${initialTop + dy}px`;
        }

        function dragEnd() {
            if (isDraggingBtn) {
                isDraggingBtn = false;
                debugBtn.style.cursor = 'move';
                debugBtn.style.transform = 'scale(1)';
            }
        }
        
        debugBtn.addEventListener('click', (e) => {
            if (hasMoved) {
                e.stopImmediatePropagation();
                e.preventDefault();
            }
        });

        // --- BACKGROUND FX ---
        function spawnCar() {
            const layer = document.getElementById('traffic-layer');
            const car = document.createElement('div');
            car.classList.add('bg-car');
            const yPos = Math.random() * window.innerHeight;
            car.style.top = yPos + 'px';
            const duration = Math.random() * 2 + 1;
            car.style.transition = `left ${duration}s linear, opacity 0.5s`;
            car.style.left = '-200px';
            car.style.opacity = Math.random() * 0.5 + 0.2;
            layer.appendChild(car);
            requestAnimationFrame(() => { car.style.left = window.innerWidth + 200 + 'px'; });
            setTimeout(() => { car.remove(); }, duration * 1000);
            setTimeout(spawnCar, Math.random() * 2000 + 500);
        }
        spawnCar();

        // --- THREE.JS ---
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        const ambientLight = new THREE.AmbientLight(0x404040, 2);
        scene.add(ambientLight);
        const directionalLight = new THREE.DirectionalLight(0xffffff, 2);
        directionalLight.position.set(5, 3, 5);
        scene.add(directionalLight);

        function createMarsTexture() {
            const canvas = document.createElement('canvas');
            canvas.width = 1024; canvas.height = 512;
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = '#b94d28';
            ctx.fillRect(0, 0, 1024, 512);
            for (let i = 0; i < 400; i++) {
                const x = Math.random() * 1024; const y = Math.random() * 512;
                const r = Math.random() * 30 + 5;
                ctx.beginPath(); ctx.arc(x, y, r, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(100, 30, 10, ${Math.random() * 0.2})`;
                ctx.fill();
            }
            return new THREE.CanvasTexture(canvas);
        }

        const geometry = new THREE.SphereGeometry(2, 64, 64);
        const material = new THREE.MeshStandardMaterial({ 
            map: createMarsTexture(), roughness: 0.8, metalness: 0.1
        });
        const earth = new THREE.Mesh(geometry, material);
        scene.add(earth);

        const atmoGeo = new THREE.SphereGeometry(2.2, 64, 64);
        const atmoMat = new THREE.MeshBasicMaterial({
            color: 0xff4500, transparent: true, opacity: 0.1,
            side: THREE.BackSide, blending: THREE.AdditiveBlending
        });
        const atmosphere = new THREE.Mesh(atmoGeo, atmoMat);
        earth.add(atmosphere);

        const bgPlanetsGroup = new THREE.Group();
        scene.add(bgPlanetsGroup);
        const planetGeometry = new THREE.IcosahedronGeometry(1, 1);
        for (let i = 0; i < 6; i++) {
            const size = Math.random() * 1.5 + 0.5;
            const planetMat = new THREE.MeshBasicMaterial({
                color: Math.random() > 0.7 ? 0x006622 : 0x004411,
                wireframe: true, transparent: true, opacity: 0.15
            });
            const bgPlanet = new THREE.Mesh(planetGeometry, planetMat);
            bgPlanet.position.set((Math.random() - 0.5) * 80, (Math.random() - 0.5) * 50, -10 - Math.random() * 40);
            bgPlanet.scale.set(size, size, size);
            bgPlanet.userData = { rotSpeedX: (Math.random() - 0.5) * 0.01, rotSpeedY: (Math.random() - 0.5) * 0.01 };
            bgPlanetsGroup.add(bgPlanet);
        }

        const particlesGeometry = new THREE.BufferGeometry();
        const particlesCount = 1000;
        const posArray = new Float32Array(particlesCount * 3);
        for(let i = 0; i < particlesCount * 3; i++) { posArray[i] = (Math.random() - 0.5) * 20; }
        particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
        const particlesMaterial = new THREE.PointsMaterial({ size: 0.03, color: 0x00ff41, transparent: true, opacity: 0.8 });
        const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
        scene.add(particlesMesh);

        camera.position.z = 100;

        let baseSpeed = 0.002; let particleSpeed = 0.001; let isTurbo = false;
        let mouseX = 0; let mouseY = 0;
        document.addEventListener('mousemove', (event) => {
            mouseX = (event.clientX / window.innerWidth - 0.5) * 2;
            mouseY = (event.clientY / window.innerHeight - 0.5) * 2;
        });

        function animate() {
            requestAnimationFrame(animate);
            bgPlanetsGroup.children.forEach(planet => {
                planet.rotation.x += planet.userData.rotSpeedX;
                planet.rotation.y += planet.userData.rotSpeedY;
            });

            if (isTurbo) {
                earth.rotation.y += 0.05;
                particlesMesh.rotation.z += 0.02;
                particlesMesh.position.z = (Date.now() * 0.01) % 5;
            } else {
                earth.rotation.y += baseSpeed;
                earth.rotation.x += 0.001;
                particlesMesh.rotation.z += particleSpeed;
                earth.rotation.y += mouseX * 0.01;
                earth.rotation.x += mouseY * 0.01;
                bgPlanetsGroup.position.x = mouseX * -2;
                bgPlanetsGroup.position.y = mouseY * -2;
            }
            renderer.render(scene, camera);
        }
        animate();

        // --- INTRO SEQUENCE (GRAVITY BRAKE) ---
        function introSequence() {
            const tl = gsap.timeline();
            gsap.set(document.body, { filter: "blur(10px)" });
            
            tl.to(camera.position, { z: 5, duration: 2.0, ease: "power4.in" });
            
            tl.add(() => {
                gsap.fromTo(document.body, { x: -10, y: 10 }, { x: 0, y: 0, duration: 1.5, ease: "elastic.out(1, 0.3)" });
                gsap.fromTo(document.body, { textShadow: "5px 0 0 rgba(255,0,0,0.8), -5px 0 0 rgba(0,255,255,0.8)" }, { textShadow: "0px 0 0 rgba(255,0,0,0), 0px 0 0 rgba(0,255,255,0)", duration: 0.5, ease: "power2.out" });
                gsap.to(document.body, { filter: "blur(0px)", duration: 0.1 });
                
                document.getElementById('loader').style.opacity = 0;
                setTimeout(() => { document.getElementById('loader').style.display = 'none'; }, 500);
                
                document.getElementById('ui-layer').classList.add('ui-loaded');
                document.getElementById('f1-track').style.opacity = 1;
                document.getElementById('nav-bar').classList.add('visible'); 
            });

            tl.to(earth.rotation, { y: 5, duration: 2.0, ease: "power2.in" }, 0);
            tl.to(particlesMesh.scale, { z: 15, duration: 1.8, ease: "power2.in" }, 0);
            tl.to(particlesMesh.scale, { z: 1, duration: 0.2, ease: "power1.out" }, 2.0);
        }
        window.onload = introSequence;

        // FIXED UPDATECLOCK FUNCTION
        function updateClock() {
            const clockEl = document.getElementById('clock');
            if (clockEl) {
                clockEl.innerText = new Date().toISOString().split('T')[1].split('.')[0] + ' UTC';
            }
        }
        setInterval(updateClock, 1000); updateClock();

        window.addEventListener('scroll', () => {
            const track = document.getElementById('f1-track');
            const car = document.getElementById('f1-car');
            const scrollPercent = window.scrollY / (document.body.scrollHeight - window.innerHeight);
            const trackHeight = track.offsetHeight - 30;
            car.style.top = (scrollPercent * trackHeight) + 'px';
        });

        function activateTurbo() {
            isTurbo = true;
            document.body.style.textShadow = "3px 0 0 rgba(255,0,0,0.8), -3px 0 0 rgba(0,255,255,0.8)";
            setTimeout(() => { isTurbo = false; document.body.style.textShadow = "none"; particlesMesh.position.z = 0; }, 2000);
        }

        let isDogMode = false;
        function toggleDebugMode() {
            if (hasMoved) return; 
            isDogMode = !isDogMode;
            const body = document.body;
            const dogPopup = document.getElementById('dog-popup');
            const btn = document.querySelector('.debug-toggle');
            if (isDogMode) {
                body.classList.add('dog-mode');
                earth.material.color.setHex(0xffcc00);
                earth.material.map = null; 
                earth.material.needsUpdate = true;
                bgPlanetsGroup.children.forEach(p => p.material.color.setHex(0xffaa00));
                particlesMaterial.color.setHex(0xff6b6b);
                dogPopup.style.display = 'block';
                btn.innerText = "[ CLOSE DEBUG / ÈóúÈñâÂÅµÈåØ ]";
                gsap.to(earth.rotation, {duration: 1, y: earth.rotation.y + 3, ease: "back.out(1.7)"});
            } else {
                body.classList.remove('dog-mode');
                earth.material.color.setHex(0xffffff); 
                earth.material.map = createMarsTexture(); 
                earth.material.needsUpdate = true;
                bgPlanetsGroup.children.forEach(p => p.material.color.setHex(Math.random() > 0.7 ? 0x006622 : 0x004411));
                particlesMaterial.color.setHex(0x00ff41);
                dogPopup.style.display = 'none';
                btn.innerText = "[ ‚ö† DEBUG MODE / ÂÅµÈåØÊ®°Âºè ]";
            }
        }

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = 1;
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, { threshold: 0.1 });
        document.querySelectorAll('.checkpoint, .rpm-card, .bio-box').forEach(el => {
            el.style.opacity = 0; el.style.transform = 'translateY(20px)';
            el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
            observer.observe(el);
        });

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>
